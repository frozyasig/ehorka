<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Messenger Ultimate</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="auth-screen" class="modal">
        <div class="auth-card">
            <h1>Messenger</h1>
            <div class="avatar-picker" onclick="document.getElementById('avatar-input').click()">
                <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" id="preview-avatar">
                <p>–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</p>
            </div>
            <input type="file" id="avatar-input" accept="image/*" hidden>
            
            <div class="form-group">
                <input type="text" id="username-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º">
                <input type="password" id="password-input" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            
            <button class="primary-btn" onclick="auth.handleAuth()">–í–æ–π—Ç–∏ –∏–ª–∏ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            <p class="small-text">–ï—Å–ª–∏ –Ω–∏–∫–Ω–µ–π–º–∞ –Ω–µ—Ç –≤ –±–∞–∑–µ, –∞–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
        </div>
    </div>

    <div id="app-container" class="app-container hidden">
        <aside class="sidebar">
            <header class="sidebar-header">
                <div class="user-profile" onclick="ui.toggleSettings(true)">
                    <img id="my-avatar-img" src="">
                    <span id="my-name-display"></span>
                </div>
                <button class="exit-btn" onclick="auth.logout()">üö™</button>
            </header>

            <div class="search-area">
                <input type="text" id="user-search" placeholder="–ü–æ–∏—Å–∫ (–≤–≤–µ–¥–∏—Ç–µ –∏–º—è)...">
            </div>

            <div id="contacts-list" class="contacts-list">
                </div>
        </aside>

        <main class="chat-main">
            <div id="empty-chat-view" class="empty-view">
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç –∏–∑ –ø–æ–∏—Å–∫–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p>
            </div>

            <div id="active-chat-view" class="chat-active-view hidden">
                <header class="chat-header">
                    <img id="active-chat-avatar" src="">
                    <h3 id="active-chat-name">–ò–º—è</h3>
                    <button class="call-btn" onclick="calls.initiateCall()">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</button>
                </header>

                <div id="messages-list" class="messages-list">
                    </div>

                <div class="chat-input-bar">
                    <button class="emoji-toggle" onclick="ui.toggleEmojiPanel()">üòä</button>
                    <div id="emoji-panel" class="emoji-panel hidden"></div>
                    
                    <input type="text" id="msg-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button class="send-btn" onclick="chat.sendMessage()">‚û§</button>
                </div>
            </div>
        </main>
    </div>

    <div id="call-modal" class="modal hidden">
        <div class="call-interface">
            <div class="call-info">
                <img id="call-avatar" src="">
                <h2 id="call-name">–ó–≤–æ–Ω–æ–∫...</h2>
                <p id="call-status">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞–º–µ—Ä–µ...</p>
            </div>
            
            <div class="video-grid">
                <video id="local-video" autoplay muted playsinline></video>
                <div class="video-placeholder">
                    <span>–°–æ–±–µ—Å–µ–¥–Ω–∏–∫</span>
                </div>
            </div>

            <div class="call-controls">
                <button class="hangup-btn" onclick="calls.endCall()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="modal hidden">
        <div class="auth-card">
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h3>
            <div class="avatar-picker" onclick="document.getElementById('edit-avatar-input').click()">
                <img id="edit-preview-avatar">
            </div>
            <input type="file" id="edit-avatar-input" accept="image/*" hidden>
            <input type="text" id="edit-username-input">
            
            <div class="btn-row">
                <button class="primary-btn" onclick="auth.updateProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="secondary-btn" onclick="ui.toggleSettings(false)">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <audio id="ringtone" loop src="https://www.soundjay.com/phone/phone-calling-1.mp3"></audio>

    <script src="script.js"></script>
</body>
</html>